package com.pwc.Virtualized.Assets.virtualizedAsset.Controller;

import org.json.JSONException;
import org.json.JSONObject;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.http.HttpStatus;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RequestBody;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;

import com.pwc.Virtualized.Assets.virtualizedAsset.model.Student;
import com.pwc.Virtualized.Assets.virtualizedAsset.service.XmlFromSAPService;

@RestController // This means that this class is a Controller
@RequestMapping(path = "/Order") // This means URL's start with /Order (after Application path)
public class SAPController {

	/*
	 * @Autowired // This means to get the bean called userRepository // Which is
	 * auto-generated by Spring, we will use it to handle the data private
	 * UserRepository userRepository;
	 */

	@Autowired
	private XmlFromSAPService xmlFromSAP;

	@GetMapping(path = "/PONumber/{PONumber}", produces = { "application/json" })
	public ResponseEntity<Object> getOrderDetailsFromPoNumber(@PathVariable("PONumber") int poNumber)
			throws JSONException {

		JSONObject response = new JSONObject(
				"{\"Count\":1,\"NextLink\":null,\"Orders\":[{\"Account\":\"PRICEWATERHOUSECOOPERS\",\"AccountNumber\":\"1038314\",\"BillTo\":{\"Attention\":null,\"City\":\"New York\",\"Country\":\"United States\",\"CountryCode\":\"USA\",\"County\":null,\"DeliveryAddress\":\"90 New York Park Avenue\",\"PostalCode\":\"10016\",\"Recipient\":\"PRICEWATERHOUSECOOPERS\",\"StateProvince\":\"NY\"},\"CurrencyCode\":\"USD\",\"DeliveryMemo\":null,\"DeliveryMode\":\"UPS GROUND\",\"InvoiceNumber\":null,\"InvoiceNumberList\":[],\"ItemList\":[{\"Description\":\"CTO MACBOOK AIR M2 8C 8C GPU13.6IN 16GB 512GB SSD 30W SPACE\",\"EndUserList\":[{\"Email\":\"YASH.BAFANA@PWC.COM\",\"Fax\":null,\"Name\":\"Yash Bafana\",\"Phone\":\"9178030185\"}],\"LineNumber\":1,\"POLineNumber\":\"0000000001\",\"MaintenanceBeginsOn\":null,\"MaintenanceExpiresOn\":null,\"Manufacturer\":\"Apple\",\"MPN\":\"Z15S000D2\",\"SPN\":\"45197566\",\"Quantity\":1,\"RelatedDataList\":[],\"Shipments\":[],\"Status\":\"OPEN ORDER\",\"UnitPrice\":1539.61},{\"Description\":\"AppleCare for Enterprise for MacBook Air (M2) 36 months Tier\",\"EndUserList\":[],\"LineNumber\":2,\"POLineNumber\":\"0000000001\",\"MaintenanceBeginsOn\":null,\"MaintenanceExpiresOn\":null,\"Manufacturer\":\"Apple\",\"MPN\":\"SFGD2LL\\/A\",\"SPN\":\"45211916\",\"Quantity\":1,\"RelatedDataList\":[],\"Shipments\":[],\"Status\":\"OPEN ORDER\",\"UnitPrice\":0},{\"Description\":\"SenseAGE Magnetic Privacy Screen Filter forMacBook Air 13.6\",\"EndUserList\":[{\"Email\":\"YASH.BAFANA@PWC.COM\",\"Fax\":null,\"Name\":\"Yash Bafana\",\"Phone\":\"9178030185\"}],\"LineNumber\":3,\"POLineNumber\":\"0000000001\",\"MaintenanceBeginsOn\":null,\"MaintenanceExpiresOn\":null,\"Manufacturer\":\"Senseage Co.,LTD.\",\"MPN\":\"SP-PVM-MA136RE-2022\",\"SPN\":\"45922405\",\"Quantity\":1,\"RelatedDataList\":[],\"Shipments\":[],\"Status\":\"OPEN ORDER\",\"UnitPrice\":28.5},{\"Description\":\"HP USB-C to RJ45 Adapter G2 - network adapter - USB-C - Giga\",\"EndUserList\":[{\"Email\":\"YASH.BAFANA@PWC.COM\",\"Fax\":null,\"Name\":\"Yash Bafana\",\"Phone\":\"9178030185\"}],\"LineNumber\":4,\"POLineNumber\":\"0000000001\",\"MaintenanceBeginsOn\":null,\"MaintenanceExpiresOn\":null,\"Manufacturer\":\"HP, Inc.\",\"MPN\":\"4Z527AA\",\"SPN\":\"44536514\",\"Quantity\":2,\"RelatedDataList\":[],\"Shipments\":[],\"Status\":\"OPEN ORDER\",\"UnitPrice\":15.21},{\"Description\":\"Belkin - Patch cable - RJ-45 (M) - RJ-45 (M) - 1.8 m - UTP\",\"EndUserList\":[{\"Email\":\"YASH.BAFANA@PWC.COM\",\"Fax\":null,\"Name\":\"Yash Bafana\",\"Phone\":\"9178030185\"}],\"LineNumber\":5,\"POLineNumber\":\"0000000001\",\"MaintenanceBeginsOn\":null,\"MaintenanceExpiresOn\":null,\"Manufacturer\":\"Belkin\",\"MPN\":\"A3L791-06\",\"SPN\":\"12460539\",\"Quantity\":1,\"RelatedDataList\":[],\"Shipments\":[],\"Status\":\"OPEN ORDER\",\"UnitPrice\":2.68},{\"Description\":\"PC Config- Asset Tagging with Reporting-Per1xUnit-Standalone\",\"EndUserList\":[{\"Email\":\"YASH.BAFANA@PWC.COM\",\"Fax\":null,\"Name\":\"Yash Bafana\",\"Phone\":\"9178030185\"}],\"LineNumber\":6,\"POLineNumber\":\"0000000001\",\"MaintenanceBeginsOn\":null,\"MaintenanceExpiresOn\":null,\"Manufacturer\":\"SHI CONFIG\",\"MPN\":\"ICO-TAG-2A\",\"SPN\":\"44672784\",\"Quantity\":1,\"RelatedDataList\":[],\"Shipments\":[],\"Status\":\"OPEN ORDER\",\"UnitPrice\":34},{\"Description\":\"CustomKitting-Combine Items InAs Few Boxes PossiblePer1xBox\",\"EndUserList\":[{\"Email\":\"YASH.BAFANA@PWC.COM\",\"Fax\":null,\"Name\":\"Yash Bafana\",\"Phone\":\"9178030185\"}],\"LineNumber\":7,\"POLineNumber\":\"0000000001\",\"MaintenanceBeginsOn\":null,\"MaintenanceExpiresOn\":null,\"Manufacturer\":\"SHI CONFIG\",\"MPN\":\"ICO-KIT-BOX\",\"SPN\":\"33356723\",\"Quantity\":1,\"RelatedDataList\":[],\"Shipments\":[],\"Status\":\"OPEN ORDER\",\"UnitPrice\":0},{\"Description\":\"PwC PC Refresh Return Label  Ingram\",\"EndUserList\":[{\"Email\":\"YASH.BAFANA@PWC.COM\",\"Fax\":null,\"Name\":\"Yash Bafana\",\"Phone\":\"9178030185\"}],\"LineNumber\":8,\"POLineNumber\":\"0000000001\",\"MaintenanceBeginsOn\":null,\"MaintenanceExpiresOn\":null,\"Manufacturer\":\"SHI International Corp\",\"MPN\":\"NPN-PWC-RETURN-INGRAM\",\"SPN\":\"46111466\",\"Quantity\":1,\"RelatedDataList\":[],\"Shipments\":[],\"Status\":\"OPEN ORDER\",\"UnitPrice\":0}],\"Number\":\"S58847172\",\"OrderedOn\":\"2023-12-15T00:00:00Z\",\"PaymentTerms\":null,\"PONumber\":\"3501059171\",\"QuoteNumber\":null,\"RelatedDataList\":[{\"Label\":\"Buyer_ID\",\"Value\":\"0000000043\"},{\"Label\":\"Contract_ID\",\"Value\":\"NO CONTRACT\"},{\"Label\":\"Supplier_ID\",\"Value\":\"0020030325\"}],\"ShipTo\":{\"Attention\":null,\"City\":\"New York\",\"Country\":\"United States\",\"CountryCode\":\"USA\",\"County\":null,\"DeliveryAddress\":\"360 W 43RD ST, APT S8D\",\"PostalCode\":\"10036\",\"Recipient\":\"Yash Bafana_\",\"StateProvince\":\"NY\"},\"Status\":\"OPEN ORDER\",\"TouchedOnUTC\":\"2023-12-15T16:03:06.587Z\"}]}");
		// System.out.println(response.get("Name"));
		// String response =
		// "{\"Email\":\"YASH.BAFANA@PWC.COM\",\"Fax\":null,\"Name\":\"Yash
		// Bafana\",\"Phone\":\"9178030185\"}";
		String response2 = response.toString();

		return new ResponseEntity<>(response2, HttpStatus.OK);
	}

	@PostMapping(path = "/XMLData", produces = { "application/json", "application/xml" }, consumes = {
			"application/xml", "application/json" })
	public ResponseEntity<Object> getXMLFromSAP(@RequestBody Student student) throws JSONException {

		Student studentXML = student;
		/*
		 * System.out.println(studentXML.getId());
		 * System.out.println(studentXML.getFirstname());
		 * System.out.println(studentXML.getLastname());
		 */
		
		xmlFromSAP.addXML(studentXML);

		return new ResponseEntity<>(studentXML, HttpStatus.OK);
	}
}
